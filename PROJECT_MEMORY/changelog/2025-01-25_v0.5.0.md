# ğŸ“… Changelog - 25 de Enero 2025

## ğŸ·ï¸ VersiÃ³n 0.5.0 - Major Release

### ğŸ¯ Resumen
ActualizaciÃ³n mayor con mejoras significativas de UI/UX, integraciÃ³n completa con Supabase y resoluciÃ³n de todos los bugs crÃ­ticos reportados.

### âœ¨ Nuevas CaracterÃ­sticas

#### ğŸ” Buscador en Filtros
- Campo de bÃºsqueda dentro del dropdown de filtros
- BÃºsqueda en tiempo real de categorÃ­as y etiquetas
- Facilita encontrar filtros especÃ­ficos rÃ¡pidamente
- Implementado con debounce de 300ms

#### â­ Favoritos Mejorados
- Cambio de color de rojo a amarillo pastel (#FFD93D)
- Mejor contraste visual
- AnimaciÃ³n suave al hover (scale 1.1)
- Experiencia mÃ¡s agradable y menos agresiva

#### ğŸ“‹ Filtros Flotantes
- Dropdown con `position: absolute`
- No desplaza el contenido al abrirse
- Box-shadow para mejor visibilidad
- Cierre automÃ¡tico al hacer clic fuera

#### ğŸ”— IntegraciÃ³n Supabase
- Cliente Supabase configurado (`@supabase/supabase-js@2`)
- Proyecto ID: `nktqqsbebhoedgookfzu`
- Base de datos con 6 tablas creadas
- Row Level Security (RLS) implementado
- Datos de ejemplo insertados

#### ğŸ”” Notificaciones del Servicio
- Sistema exclusivo para mensajes del servicio
- No incluye notificaciones de acciones del usuario
- Badge con contador de no leÃ­das
- Array `serviceNotifications` separado

### ğŸ› Bugs Corregidos

#### âœ… Modal de Prompts
- **Problema**: BotÃ³n "AÃ±adir Prompt" no funcionaba
- **SoluciÃ³n**: Reconstruido completamente el modal
- **Estado**: Funcional con validaciÃ³n de campos

#### âœ… URLs de GPTs
- **Problema**: Mostraba "URL del GPT no disponible"
- **SoluciÃ³n**: URLs correctas aÃ±adidas a todos los GPTs
- **Estado**: Enlaces funcionales a chat.openai.com

#### âœ… Resize del Sidebar
- **Problema**: No se podÃ­a redimensionar el sidebar
- **SoluciÃ³n**: Event listeners restaurados
- **Estado**: Resize funcional (320px-600px)

#### âœ… CategorÃ­as en GPTs
- **Problema**: Mostraba "Oficial" en lugar del nombre de categorÃ­a
- **SoluciÃ³n**: Badge muestra `gpt.category`
- **Estado**: CategorÃ­as correctas visibles

### ğŸ¨ Mejoras de UI/UX

#### DiseÃ±o Optimizado
- Eliminadas lÃ­neas divisorias redundantes entre toolbar y filtros
- Mejor uso del espacio vertical
- Transiciones suaves (0.2s) en todas las interacciones
- Hover states mejorados

#### Responsive Mejorado
- Ajustes especÃ­ficos para 320px, 400px, 550px
- Grid adaptativo (`repeat(auto-fill, minmax(250px, 1fr))`)
- Modal responsive con padding reducido en mÃ³viles
- Font sizes ajustados para pantallas pequeÃ±as

#### Estados VacÃ­os
- Mensajes claros cuando no hay resultados
- Sugerencias Ãºtiles ("Intenta con otros filtros")
- DiseÃ±o consistente con tema dark
- Iconos y botones de acciÃ³n donde corresponde

### ğŸ”§ Cambios TÃ©cnicos

#### Arquitectura
- **sidebar-v0.5.0.js**: Nueva implementaciÃ³n desde cero
- IIFE pattern para evitar contaminaciÃ³n global
- SecurityUtils integrado en el archivo
- Sin dependencias de mÃ³dulos externos

#### Performance
- Debounce en bÃºsquedas (300ms)
- CachÃ© de elementos DOM en `elements`
- Renderizado eficiente con `DocumentFragment` implÃ­cito
- Event delegation donde es posible

#### Seguridad
- ValidaciÃ³n de todos los inputs
- `escapeHtml` en todo contenido dinÃ¡mico
- Sin `eval()` ni cÃ³digo dinÃ¡mico
- CSP compliant (Manifest V3)
- Atributos sanitizados

### ğŸ“ Archivos Modificados

```
dist/
â”œâ”€â”€ manifest.json              # v0.4.4 â†’ v0.5.0
â”œâ”€â”€ sidebar/
â”‚   â”œâ”€â”€ index.html            # +Supabase SDK, -security.js
â”‚   â”œâ”€â”€ sidebar-v0.5.0.js    # NUEVO (2057 lÃ­neas)
â”‚   â””â”€â”€ sidebar-fixed.js      # Mantenido (v0.4.4)
â””â”€â”€ config/
    â””â”€â”€ supabase.js           # ConfiguraciÃ³n del proyecto
```

### ğŸ“Š Base de Datos Supabase

#### Tablas Creadas
1. **users** - GestiÃ³n de usuarios
2. **official_gpts** - GPTs oficiales (5 registros)
3. **user_favorites** - Favoritos por usuario
4. **user_prompts** - Prompts personalizados
5. **user_settings** - ConfiguraciÃ³n usuario
6. **notifications** - Sistema notificaciones

#### PolÃ­ticas RLS
- `users`: Solo lectura propio perfil
- `official_gpts`: Lectura pÃºblica
- `user_favorites`: CRUD propio usuario
- `user_prompts`: CRUD propio usuario
- `notifications`: Lectura propia/pÃºblica

### ğŸ”„ Proceso de MigraciÃ³n

Para usuarios con v0.4.x:
1. Recargar extensiÃ³n en `chrome://extensions/`
2. Los datos locales se mantienen
3. La autenticaciÃ³n Supabase es opcional
4. No hay cambios breaking

### ğŸ“ˆ MÃ©tricas

- **LÃ­neas de cÃ³digo**: +2057 (sidebar-v0.5.0.js)
- **Bundle size**: ~45KB (objetivo <50KB âœ…)
- **Nuevas funciones**: 42
- **Bugs resueltos**: 5 crÃ­ticos
- **Test coverage**: Por implementar

### ğŸ¯ Pendiente

1. **Unificar filtros y vista** en una sola lÃ­nea
2. **Implementar autenticaciÃ³n** con Supabase Auth
3. **Sincronizar datos** locales con Supabase
4. **Tests automatizados** con Vitest

### ğŸ’¡ Decisiones de DiseÃ±o

1. **SecurityUtils interno**: Evita problemas de carga de mÃ³dulos
2. **Amarillo pastel**: Menos agresivo que rojo, mÃ¡s amigable
3. **Dropdown flotante**: Mejor UX, no interrumpe el flujo
4. **Service notifications**: SeparaciÃ³n clara de concerns
5. **Supabase ready**: Preparado para escalar

### ğŸš€ Deployment

```bash
# GitHub
git add .
git commit -m "feat: v0.5.0 - Major UI/UX improvements"
git push origin main

# Resultado
Commit: bb603f2
Estado: âœ… Pushed successfully
```

---

**Desarrollado por**: Carlos Rodera  
**Asistido por**: Claude AI  
**Fecha**: 25 de Enero 2025  
**Hora**: 23:30